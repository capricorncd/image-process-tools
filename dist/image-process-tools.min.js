/*!
 * image-process v4.0.0
 * https://github.com/capricorncd/image-process-tools
 * Copyright Â© 2017-present, capricorncd
 * Released under the MIT License
 * Released on: 2020-09-06 21:06:10
 */
!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(window,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t){function n(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=n=function(e){return typeof e}:e.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(t)}e.exports=n},function(e,t,n){"use strict";n.r(t),n.d(t,"ZxImageProcess",(function(){return N})),n.d(t,"utils",(function(){return r})),n.d(t,"handleMediaFile",(function(){return A})),n.d(t,"TOUCH_EVENTS",(function(){return H}));var r={};n.r(r),n.d(r,"base64ToBlob",(function(){return f})),n.d(r,"convertFileSize",(function(){return d})),n.d(r,"createCanvas",(function(){return c})),n.d(r,"createElement",(function(){return u})),n.d(r,"getBase64Info",(function(){return h})),n.d(r,"hasOwn",(function(){return O})),n.d(r,"isArray",(function(){return w})),n.d(r,"isFunction",(function(){return v})),n.d(r,"isNumber",(function(){return g})),n.d(r,"isObject",(function(){return y})),n.d(r,"isString",(function(){return b})),n.d(r,"isUndefined",(function(){return m})),n.d(r,"readFile",(function(){return a})),n.d(r,"toBlobUrl",(function(){return s})),n.d(r,"toNumber",(function(){return P}));var i="undefined"==typeof document?{body:{},addEventListener:function(){},removeEventListener:function(){},activeElement:{blur:function(){},nodeName:""},querySelector:function(){return null},querySelectorAll:function(){return[]},getElementById:function(){return null},createEvent:function(){return{initEvent:function(){}}},createElement:function(){return{children:[],childNodes:[],style:{},setAttribute:function(){},getElementsByTagName:function(){return[]}}},location:{hash:""}}:document,o="undefined"==typeof window?{document:i,navigator:{userAgent:""},location:{},history:{},CustomEvent:function(){return this},addEventListener:function(){},removeEventListener:function(){},getComputedStyle:function(){return{getPropertyValue:function(){return""}}},Image:function(){},Date:function(){},screen:{},setTimeout:function(){},clearTimeout:function(){}}:window;function u(e,t){var n=i.createElement(e);return y(t)&&Object.keys(t).forEach((function(e){n.setAttribute(e,t[e])})),n}function c(e,t){var n=t.enableDevicePixelRatio&&o.devicePixelRatio||1,r=u("canvas");r.width=t.dw*n,r.height=t.dh*n;var i=r.getContext("2d");return i.scale(n,n),i.drawImage(e,t.sx,t.sy,t.sw,t.sh,t.dx,t.dy,t.dw,t.dh),r}function a(e,t){var n=new FileReader;return new Promise((function(t,r){n.onload=function(e){t(e.target.result)},n.onerror=r,n.readAsDataURL(e)}))}function d(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],r=e,i="Byte",o=0,u=e/1024;u>1;u/=1024,o++)r=u.toFixed(t),i=n[o];return{text:r+i,value:+r,unit:i}}function f(e,t){var n=h(e),r=o.atob(n.data);t=t||n.type;for(var i=new Uint8Array(r.length),u=0;u<r.length;u++)i[u]=r.charCodeAt(u);return new Blob([i],{type:t})}function h(e){var t=e.split(","),n="";return/data:(\w+\/\w+);base64/.test(t[0])&&(n=RegExp.$1),{type:n,data:t[1]}}function s(e){return(o.URL||o.webkitURL).createObjectURL(e)}var l=n(1),p=n.n(l);function y(e){return e&&"object"===p()(e)&&!w(e)}function w(e){return Array.isArray(e)}function v(e){return"function"==typeof e}function b(e){return"string"==typeof e}function g(e){return"number"==typeof e}function m(e){return void 0===e}function O(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function P(e){return e>>0}var x=n(0),j=n.n(x),E={enableDevicePixelRatio:!1,height:0,isForce:!1,mimeType:"image/jpeg",perResize:500,quality:.9,width:0};function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){j()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function D(e,t){return new Promise((function(n,r){t=S(S({},E),t),/^data:(.+?);base64/.test(e)?T(e,t,n,r):a(e).then((function(e){T(e,t,n,r)})).catch(r)}))}function T(e,t,n,r){var i=f(e,t.mimeType),o=u("img");o.onload=function(){var u={element:o,base64:e,width:o.naturalWidth||o.width,height:o.naturalHeight||o.height,type:i.type,size:i.size};t.width>0&&t.height>0?function(e,t,n,r){try{var i=y(t.cropInfo)?S(S({},t.cropInfo),{},{dx:0,dy:0,dw:t.width,dh:t.height}):function(e,t){var n,r=e.width,i=e.height,o=t.width,u=t.height,c=i*o/u;if(r>c)n={sx:(r-c)/2,sy:0,sw:c,sh:i};else{var a=r*u/o;n={sx:0,sy:(i-a)/2,sw:r,sh:a}}return S(S({},n),{},{dx:0,dy:0,dw:o,dh:u})}(e,t);O(i,"enableDevicePixelRatio")||(i.enableDevicePixelRatio=t.enableDevicePixelRatio);var o=c(e.element,{enableDevicePixelRatio:t.enableDevicePixelRatio,sx:i.sx,sy:i.sy,sw:i.sw,sh:i.sh,dx:0,dy:0,dw:i.sw,dh:i.sh});B(o,e,t,S(S({},i),{},{sx:0,sy:0,sw:o.width,sh:o.height}),n)}catch(e){r(e)}}(u,t,n,r):t.width>0||t.height>0?function(e,t,n,r){try{var i={enableDevicePixelRatio:t.enableDevicePixelRatio,sx:0,sy:0,sw:e.width,sh:e.height,dx:0,dy:0,dw:t.width,dh:t.height};if(t.width>0){if(e.width<=t.width&&!t.isForce)return void n(S(S({},e),{},{raw:e}));i.dh=e.height*t.width/e.width,t.height=i.dh}else{if(e.height<=t.height&&!t.isForce)return void n(S(S({},e),{},{raw:e}));i.dw=e.width*t.height/e.height,t.width=i.dw}B(e.element,e,t,i,n)}catch(e){r(e)}}(u,t,n,r):n(S(S({},u),{},{raw:u}))},o.onerror=r,o.src=e}function B(e,t,n,r,i){var o=t.width>t.height?t.width-r.dw:t.height-r.dh;if(o>n.perResize){for(var u=t.height/t.width;o>n.perResize;)o-=n.perResize,r.sw=e.width,r.sh=e.height,r.dw=n.width+o,r.dh=r.dw*u,e=c(e,r);r.sw=e.width,r.sh=e.height,r.dw=n.width,r.dh=n.height}var a=c(e,r),d=n.mimeType,h=a.toDataURL(d,n.quality),l=f(h,d);i({element:a,type:d,width:a.width,height:a.height,blob:l,data:l,url:s(l),base64:h,size:l.size,raw:t})}function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach((function(t){j()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function U(e,t){return new Promise((function(n,r){var i=u("video",{src:s(e),autoplay:!0}),o=!1;i.onerror=r,i.oncanplay=function(){if(!o){o=!0;var c={videoFile:e,videoWidth:i.videoWidth,videoHeight:i.videoHeight,duration:i.duration,currentTime:t.currentTime};(function(e,t){var n=t.currentTime,r=t.duration,i=t.videoWidth,o=t.videoHeight;return new Promise((function(t){(n=m(n)?r*Math.random():P(n))>r&&(n=r),e.currentTime=n,e.pause();var c=u("canvas"),a=c.getContext("2d");c.width=i,c.height=o,setTimeout((function(){a.drawImage(e,0,0,c.width,c.height),t(c.toDataURL("image/jpeg"))}),500)}))})(i,c).then((function(e){t.width||t.height||(t.width=c.videoWidth,t.height=c.videoHeight),D(e,t).then((function(e){n(M(M({},c),e)),i=null})).catch(r)})).catch(r)}}}))}function A(e,t){return new Promise((function(n,r){var i=e.type;/^(image|video)/.test(i)?"image"===RegExp.$1?D(e,t).then(n).catch(r):U(e,t).then(n).catch(r):r(new Error("File type[".concat(i,"] not supported")))}))}var L=o.navigator,z=L.msPointerEnabled,I=L.pointerEnabled,C="ontouchstart"in o,_=["mousedown","mousemove","mouseup"];z&&(_=["MSPointerDown","MSPointerMove","MSPointerUp"]),I&&(_=["pointerdown","pointermove","pointerup"]);var H={start:C?"touchstart":_[0],move:C?"touchmove":_[1],end:C?"touchend":_[2]};function N(){}N.prototype={constructor:N};t.default=N}])}));