/*!
 * image-process v4.1.0
 * https://github.com/capricorncd/image-process-tools
 * Copyright Â© 2017-present, capricorncd
 * Released under the MIT License
 * Released on: 2021-10-07 18:54:21
 */
!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(window,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t){function n(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=n=function(e){return typeof e}:e.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(t)}e.exports=n},function(e,t,n){"use strict";n.r(t),n.d(t,"isObject",(function(){return u})),n.d(t,"isArray",(function(){return c})),n.d(t,"isFunction",(function(){return a})),n.d(t,"isString",(function(){return d})),n.d(t,"isNumber",(function(){return f})),n.d(t,"isUndefined",(function(){return s})),n.d(t,"hasOwn",(function(){return h})),n.d(t,"createElement",(function(){return y})),n.d(t,"createCanvas",(function(){return v})),n.d(t,"readFile",(function(){return w})),n.d(t,"convertFileSize",(function(){return b})),n.d(t,"base64ToBlob",(function(){return g})),n.d(t,"getBase64Info",(function(){return m})),n.d(t,"toBlobUrl",(function(){return O})),n.d(t,"toNumber",(function(){return P})),n.d(t,"ZxImageProcess",(function(){return H})),n.d(t,"utils",(function(){return r})),n.d(t,"handleMediaFile",(function(){return M})),n.d(t,"TOUCH_EVENTS",(function(){return _}));var r={};n.r(r),n.d(r,"isObject",(function(){return u})),n.d(r,"isArray",(function(){return c})),n.d(r,"isFunction",(function(){return a})),n.d(r,"isString",(function(){return d})),n.d(r,"isNumber",(function(){return f})),n.d(r,"isUndefined",(function(){return s})),n.d(r,"hasOwn",(function(){return h})),n.d(r,"createElement",(function(){return y})),n.d(r,"createCanvas",(function(){return v})),n.d(r,"readFile",(function(){return w})),n.d(r,"convertFileSize",(function(){return b})),n.d(r,"base64ToBlob",(function(){return g})),n.d(r,"getBase64Info",(function(){return m})),n.d(r,"toBlobUrl",(function(){return O})),n.d(r,"toNumber",(function(){return P}));var i=n(1),o=n.n(i);function u(e){return e&&"object"===o()(e)&&!c(e)}function c(e){return Array.isArray(e)}function a(e){return"function"==typeof e}function d(e){return"string"==typeof e}function f(e){return"number"==typeof e}function s(e){return void 0===e}function h(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var l="undefined"==typeof document?{body:{},addEventListener:function(){},removeEventListener:function(){},activeElement:{blur:function(){},nodeName:""},querySelector:function(){return null},querySelectorAll:function(){return[]},getElementById:function(){return null},createEvent:function(){return{initEvent:function(){}}},createElement:function(){return{children:[],childNodes:[],style:{},setAttribute:function(){},getElementsByTagName:function(){return[]}}},location:{hash:""}}:document,p="undefined"==typeof window?{document:l,navigator:{userAgent:""},location:{},history:{},CustomEvent:function(){return this},addEventListener:function(){},removeEventListener:function(){},getComputedStyle:function(){return{getPropertyValue:function(){return""}}},Image:function(){},Date:function(){},screen:{},setTimeout:function(){},clearTimeout:function(){}}:window;function y(e,t){var n=l.createElement(e);return u(t)&&Object.keys(t).forEach((function(e){n.setAttribute(e,t[e])})),n}function v(e,t){var n=t.enableDevicePixelRatio&&p.devicePixelRatio||1,r=y("canvas");r.width=t.dw*n,r.height=t.dh*n;var i=r.getContext("2d");return i.scale(n,n),i.drawImage(e,t.sx,t.sy,t.sw,t.sh,t.dx,t.dy,t.dw,t.dh),r}function w(e,t){var n=new FileReader;return new Promise((function(t,r){n.onload=function(e){t(e.target.result)},n.onerror=r,n.readAsDataURL(e)}))}function b(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],r=e,i="Byte",o=0,u=e/1024;u>1;u/=1024,o++)r=u.toFixed(t),i=n[o];return{text:r+i,value:+r,unit:i}}function g(e,t){var n=m(e),r=p.atob(n.data);t=t||n.type;for(var i=new Uint8Array(r.length),o=0;o<r.length;o++)i[o]=r.charCodeAt(o);return new Blob([i],{type:t})}function m(e){var t=e.split(","),n="";return/data:(\w+\/\w+);base64/.test(t[0])&&(n=RegExp.$1),{type:n,data:t[1]}}function O(e){return(p.URL||p.webkitURL).createObjectURL(e)}function P(e,t){t=t||0;try{var n=Number(e);return isNaN(n)?t:n}catch(e){return t}}var x=n(0),j=n.n(x),E={enableDevicePixelRatio:!1,height:0,isForce:!1,mimeType:"image/jpeg",perResize:500,quality:.9,width:0};function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){j()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function D(e,t){return new Promise((function(n,r){t=R(R({},E),t),/^data:(.+?);base64/.test(e)?B(e,t,n,r):w(e).then((function(e){B(e,t,n,r)})).catch(r)}))}function B(e,t,n,r){var i=g(e,t.mimeType),o=y("img");o.onload=function(){var c={element:o,base64:e,width:o.naturalWidth||o.width,height:o.naturalHeight||o.height,type:i.type,size:i.size};t.width>0&&t.height>0?function(e,t,n,r){try{var i=u(t.cropInfo)?R(R({},t.cropInfo),{},{dx:0,dy:0,dw:t.width,dh:t.height}):function(e,t){var n,r=e.width,i=e.height,o=t.width,u=t.height,c=i*o/u;if(r>c)n={sx:(r-c)/2,sy:0,sw:c,sh:i};else{var a=r*u/o;n={sx:0,sy:(i-a)/2,sw:r,sh:a}}return R(R({},n),{},{dx:0,dy:0,dw:o,dh:u})}(e,t);h(i,"enableDevicePixelRatio")||(i.enableDevicePixelRatio=t.enableDevicePixelRatio);var o=v(e.element,{enableDevicePixelRatio:t.enableDevicePixelRatio,sx:i.sx,sy:i.sy,sw:i.sw,sh:i.sh,dx:0,dy:0,dw:i.sw,dh:i.sh});T(o,e,t,R(R({},i),{},{sx:0,sy:0,sw:o.width,sh:o.height}),n)}catch(e){r(e)}}(c,t,n,r):t.width>0||t.height>0?function(e,t,n,r){try{var i={enableDevicePixelRatio:t.enableDevicePixelRatio,sx:0,sy:0,sw:e.width,sh:e.height,dx:0,dy:0,dw:t.width,dh:t.height};if(t.width>0){if(e.width<=t.width&&!t.isForce)return void n(R(R({},e),{},{raw:e}));i.dh=e.height*t.width/e.width,t.height=i.dh}else{if(e.height<=t.height&&!t.isForce)return void n(R(R({},e),{},{raw:e}));i.dw=e.width*t.height/e.height,t.width=i.dw}T(e.element,e,t,i,n)}catch(e){r(e)}}(c,t,n,r):n(R(R({},c),{},{raw:c}))},o.onerror=r,o.src=e}function T(e,t,n,r,i){var o=t.width>t.height?t.width-r.dw:t.height-r.dh;if(o>n.perResize){for(var u=t.height/t.width;o>n.perResize;)o-=n.perResize,r.sw=e.width,r.sh=e.height,r.dw=n.width+o,r.dh=r.dw*u,e=v(e,r);r.sw=e.width,r.sh=e.height,r.dw=n.width,r.dh=n.height}var c=v(e,r),a=n.mimeType,d=c.toDataURL(a,n.quality),f=g(d,a);i({element:c,type:a,width:c.width,height:c.height,blob:f,data:f,url:O(f),base64:d,size:f.size,raw:t})}function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach((function(t){j()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function A(e,t){return new Promise((function(n,r){var i=y("video",{src:O(e),autoplay:!0}),o=!1;i.onerror=r,i.oncanplay=function(){if(!o){o=!0;var u={videoFile:e,videoWidth:i.videoWidth,videoHeight:i.videoHeight,duration:i.duration,currentTime:t.currentTime};(function(e,t){var n=t.currentTime,r=t.duration,i=t.videoWidth,o=t.videoHeight;return new Promise((function(t){(n=s(n)?r*Math.random():P(n))>r&&(n=r),e.currentTime=n,e.pause();var u=y("canvas"),c=u.getContext("2d");u.width=i,u.height=o,setTimeout((function(){c.drawImage(e,0,0,u.width,u.height),t(u.toDataURL("image/jpeg"))}),500)}))})(i,u).then((function(e){t.width||t.height||(t.width=u.videoWidth,t.height=u.videoHeight),D(e,t).then((function(e){n(U(U({},u),e)),i=null})).catch(r)})).catch(r)}}}))}function M(e,t){return new Promise((function(n,r){var i=e.type;/^(image|video)/.test(i)?"image"===RegExp.$1?D(e,t).then(n).catch(r):A(e,t).then(n).catch(r):r(new Error("File type[".concat(i,"] not supported")))}))}var N=p.navigator,z=N.msPointerEnabled,L=N.pointerEnabled,I="ontouchstart"in p,C=["mousedown","mousemove","mouseup"];z&&(C=["MSPointerDown","MSPointerMove","MSPointerUp"]),L&&(C=["pointerdown","pointermove","pointerup"]);var _={start:I?"touchstart":C[0],move:I?"touchmove":C[1],end:I?"touchend":C[2]};function H(){}H.prototype={constructor:H};t.default=H}])}));